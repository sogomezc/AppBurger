<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestión de Pedidos</title>
  <!-- Estilos globales -->
  <link rel="stylesheet" href="/assets/css/gestion.prod.css">
</head>
<body>

  <!-- Sidebar -->
  <div class="sidebar">
    <div>
      <h2>Golden Burger</h2>
      <ul>
        <li><a href="dashboard.html">Dashboard</a></li>
        <li><a href="gestorClientes.html">Clientes</a></li>
        <li><a href="gestorPedidos.html">Pedidos</a></li>
        <li><a href="productos.html">Productos</a></li>
      </ul>
    </div>
    <div class="logout">
      <a href="../login.html">Cerrar Sesión</a>
    </div>
  </div>

  <!-- Contenido -->
  <div class="container-content">
    <h1>Gestión de Productos</h1>

    <!-- Formulario -->
    <div class="form-container">
      <form class="form-producto" id="formProducto">
          <label for="id_producto">ID</label>
          <input type="text" id="id_producto" placeholder="ID" required>

          <label for="nombre_producto">Nombre</label>
          <input type="text" id="nombre_producto" placeholder="Nombre" required>

          <label for="categoria_producto">Categoria</label>
          <input type="text" id="categoria_producto" placeholder="Categoria" required>

          <label for="precio_producto">Precio</label>
          <input type="number" id="precio_producto" placeholder="Precio" required>

          <label for="descripcion_producto">Descripcion</label>
          <input type="text" id="descripcion_producto" placeholder="Descripcion" required>

          <label for="stock_producto">Stock</label>
          <input type="number" id="stock_producto" placeholder="Stock" required>

          <label for="imagen_producto">Imagen</label>
          <input type="file" id="imagen_producto" required>
          
          <input class="btn-agregar" type="submit" value="Agregar Producto">
      </form>
</div>

     <!-- Tabla de Productos -->
    <table class="tabla-producto" id="tablaProductos">
      <thead>
        <tr>
          <th>Id</th>
          <th>Nombre</th>
          <th>Categoria</th>
          <th>Precio</th>
          <th>Descripcion</th>
          <th>Stock</th>
          <th>Imagen</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        
      </tbody>
    </table>
  </div>

</body>
</html>

<script>
  
document.addEventListener('DOMContentLoaded', () => {

    
    const formProducto = document.getElementById('formProducto');
    const tablaBody = document.querySelector('#tablaProductos tbody');

   
    formProducto.addEventListener('submit', (evento) => {
        
        evento.preventDefault();

        
        const id = document.getElementById('id_producto').value;
        const nombre = document.getElementById('nombre_producto').value;
        const categoria = document.getElementById('categoria_producto').value;
        const precio = document.getElementById('precio_producto').value;
        const descripcion = document.getElementById('descripcion_producto').value;
        const stock = document.getElementById('stock_producto').value;
        
        
        const imagenInput = document.getElementById('imagen_producto');
        const imagenFile = imagenInput.files[0];
        let imagenSrc = '';

        if (imagenFile) {
            // Crea una URL para la imagen del archivo local
            imagenSrc = URL.createObjectURL(imagenFile);
        } else {
            imagenSrc = 'ruta/a/imagen_por_defecto.jpg';
        }

        // 5. Crear una nueva fila para la tabla
        const nuevaFila = document.createElement('tr');
        nuevaFila.classList.add('fila-producto');
        nuevaFila.innerHTML = `
        
            <td>${id}</td>
            <td>${nombre}</td>
            <td>${categoria}</td>
            <td>${precio}</td>
            <td>${descripcion}</td>
            <td>${stock}</td>
            <td><img src="${imagenSrc}" alt="${nombre}" width="50"></td>
            <td>
                
                <button class="btn-eliminar">Eliminar</button>
            </td>`;

        //Añadir fila
        tablaBody.appendChild(nuevaFila);

        // Limpiar los campos del formulario
        formProducto.reset();
        
        // Revoca la URL del objeto después de añadir la imagen a la tabla para liberar memoria
        if (imagenFile) {
            URL.revokeObjectURL(imagenSrc);
        }
    });

    tablaBody.addEventListener('click', (evento) => {
      
      if (evento.target.classList.contains('btn-eliminar')) {
          
          const filaAEliminar = evento.target.closest('tr');

          
          const confirmar = confirm('¿Estás seguro de que quieres eliminar este producto?');

          
          if (confirmar && filaAEliminar) {
              filaAEliminar.remove();
          }
      }
  });

});

  
</script>
